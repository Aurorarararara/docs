import{_ as l,c as a,o as h,m as i,a as s}from"./chunks/framework.BS5Zd73-.js";const t="/assets/6.IoYxUSKp.png",y=JSON.parse('{"title":"数据库","description":"","frontmatter":{},"headers":[],"relativePath":"study/Java/JavaWeb/数据库.md","filePath":"study/Java/JavaWeb/数据库.md","lastUpdated":null}'),e={name:"study/Java/JavaWeb/数据库.md"},k=i("div",null,[i("h1",{id:"数据库",tabindex:"-1"},[s("数据库 "),i("a",{class:"header-anchor",href:"#数据库","aria-label":'Permalink to "数据库"'},"​")]),i("h2",{id:"什么是数据库",tabindex:"-1"},[s("什么是数据库 "),i("a",{class:"header-anchor",href:"#什么是数据库","aria-label":'Permalink to "什么是数据库"'},"​")]),i("p",null,"数据库是数据管理的有效技术，是由一批数据构成的有序集合，这些书数据被存放在结构化的数据表里，。数据表之间相互关联，反映客观事务间的本质联系。"),i("h3",{id:"常见的数据库",tabindex:"-1"},[s("常见的数据库 "),i("a",{class:"header-anchor",href:"#常见的数据库","aria-label":'Permalink to "常见的数据库"'},"​")]),i("ul",null,[i("li",null,"MySQL - 免费，用的最多，开源数据库，适合中小型"),i("li",null,"Microsoft SQL Server - 收费，但提供技术支持，使用于Windows Server"),i("li",null,"Oracle - 收费 大型数据库系统")]),i("h3",{id:"数据模型",tabindex:"-1"},[s("数据模型 "),i("a",{class:"header-anchor",href:"#数据模型","aria-label":'Permalink to "数据模型"'},"​")]),i("p",null,"数据模型与现实中的模型一样，是对现实世界数据特征的一种抽象。比如一个学生的特征包括：姓名、学号、年纪、专业等这些成为一种属性，属性具有以下特点："),i("ul",null,[i("li",null,"属性不可再分"),i("li",null,"一个实体的属性可以有很多个"),i("li",null,"用于唯一区分不同实体的属性，称为Key，比如每个同学的学号都是不一样的"),i("li",null,"属性取值可以有一定约束，比如性别只能是男或女")]),i("h2",{id:"数据库的规范化",tabindex:"-1"},[s("数据库的规范化 "),i("a",{class:"header-anchor",href:"#数据库的规范化","aria-label":'Permalink to "数据库的规范化"'},"​")]),i("h3",{id:"第一范式-1nf",tabindex:"-1"},[s("第一范式(1NF) "),i("a",{class:"header-anchor",href:"#第一范式-1nf","aria-label":'Permalink to "第一范式(1NF)"'},"​")]),i("p",null,"第一范式是指数据库的每一列都是不可分割的基本数据项，而下面这样的就存在可分割的情况："),i("ul",null,[i("li",null,[i("p",null,"学生（姓名，电话号码）"),i("p",null,"电话号码包括 家用座机电话 和 移动电话，因此可以拆分为：")]),i("li",null,[i("p",null,"学生（姓名，座机号码，手机号码）")])]),i("p",null,"满足第一范式是关系型数据库最基本的要求！"),i("h3",{id:"第二范式-2nf",tabindex:"-1"},[s("第二范式(2NF) "),i("a",{class:"header-anchor",href:"#第二范式-2nf","aria-label":'Permalink to "第二范式(2NF)"'},"​")]),i("p",null,"第二范式要求表中必须存在主键，且其他的属性必须完全依赖于主键，比如："),i("ul",null,[i("li",null,"学生（学号，姓名，性别）")]),i("p",null,"学号是每个学生的唯一标识，每个学生都有着不同的学号，因此此表中存在一个主键，并且每个学生的所有属于都依赖于学号，学号发生改变就代表学生发生改变，姓名和性别都会因此发生改变，所有满足第二范式"),i("h3",{id:"第三范式-3nf",tabindex:"-1"},[s("第三范式（3NF） "),i("a",{class:"header-anchor",href:"#第三范式-3nf","aria-label":'Permalink to "第三范式（3NF）"'},"​")]),i("p",null,"在满足第二范式的情况下，所以的属性都不传递依赖于主键，满足第三范式"),i("ul",null,[i("li",null,"学生借书情况（借阅编号，学生学号，书籍编号，书籍名称，书籍作者）")]),i("p",null,"实际上书籍编号依赖于借阅编号，而书籍名称和书籍作者都依赖于书籍编号，因此存在传递依赖的情况，我们可以将书籍信息进行单独拆分为另一张表："),i("ul",null,[i("li",null,"学生借书情况（借阅编号，学生学号，书籍编号）"),i("li",null,"书籍（书籍编号，书籍名称，书籍作者）")]),i("p",null,"这样就消除了传递依赖，从而满足第三范式"),i("h3",{id:"bcnf",tabindex:"-1"},[s("BCNF "),i("a",{class:"header-anchor",href:"#bcnf","aria-label":'Permalink to "BCNF"'},"​")]),i("p",null,"BCNF作为第三范式的补充，假设仓库管理关系表为Manage(仓库ID，存储物品，管理员ID，数量)，且有一个管理员在一个仓库中作：一个仓库可以存储多种物品，这个数据库中存在如下决定关系："),i("p",null,"(仓库ID，存储物品ID) -> (管理员ID，数量)"),i("p",null,"(管理员ID，存储物品ID) -> (仓库ID，数量)"),i("p",null,"所以，(仓库ID，存储物品ID) 和(管理员ID，存储物品ID)都是Manage的候选关键字，表中唯一的非关键字段为数量，符合第三范式，但是，由于存在存在如下决定关系："),i("p",null,"(仓库ID) -> (管理员ID)"),i("p",null,"(管理员ID) -> (仓库ID)"),i("p",null,"即存在关键字段决定关键字段的情况，所以不符合BCNF范式"),i("h2",{id:"认识sql语句",tabindex:"-1"},[s("认识SQL语句 "),i("a",{class:"header-anchor",href:"#认识sql语句","aria-label":'Permalink to "认识SQL语句"'},"​")]),i("p",null,[i("strong",null,"结构化查询语言"),s("简称SQL，专门用于数据库的操作")]),i("ul",null,[i("li",null,"SQL语句不区分大小写（关键字推荐大写），它支持多行，并且需要使用；结尾"),i("li",null,"SQL也支持注释，通过使用 -- 或 # 来编写注释内容，也可以使用/*来进行多行注释")]),i("p",null,"学习目标："),i("ul",null,[i("li",null,"数据查询语句"),i("li",null,"数据操纵语句"),i("li",null,"数据库定义语句"),i("li",null,"数据库控制语句")]),i("h2",{id:"数据库定义语言-ddl",tabindex:"-1"},[s("数据库定义语言(DDL) "),i("a",{class:"header-anchor",href:"#数据库定义语言-ddl","aria-label":'Permalink to "数据库定义语言(DDL)"'},"​")]),i("ol",null,[i("li",null,"创建数据库")]),i("div",{class:"language-SQL vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"SQL"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code","v-pre":""},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," DATABASE"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," study"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"//"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 为了支持中文，我们在创建的时候可以设定编码格式")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," DATABASE"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," IF"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," NOT"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," EXISTS"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," study "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"DEFAULT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," CHARSET utf8_general_ci;")])])])]),i("ol",{start:"2"},[i("li",null,"删除数据库")]),i("div",{class:"language-SQL vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"SQL"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code","v-pre":""},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"DROP"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," DATABASE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," study;")])])])]),i("p",null,[i("strong",null,"SQL数据类型"),s("：")]),i("p",null,"以下数据类型用于字符串存储："),i("ul",null,[i("li",null,"char(n)可以存储任意字符串，但是是固定长度为n，如果插入的长度小于定义长度时，则用空格填充"),i("li",null,"varchar(n)也可以存储任意数量的字符串，长度不固定，但不能超过n，不会用空格填充")]),i("p",null,"以下数据类型用于存储数字："),i("ul",null,[i("li",null,"smallint用于存储小的整数，范围在(-32768,32767)"),i("li",null,"int用于存储一般的整数，范围在(-2147483648,2147483647)"),i("li",null,"bigint用于存储大型整数，范围在(-9,223,372,036,854,775,808, 9,223,372,036,854,775,807)"),i("li",null,"float用于存储单精度小数"),i("li",null,"double用于存储双精度的小数")]),i("p",null,"以下数据类型用于存储时间："),i("ul",null,[i("li",null,"date存储日期"),i("li",null,"time存储时间"),i("li",null,"year存储年份"),i("li",null,"datetime用于混合存储日期+时间")]),i("p",null,[i("strong",null,"列级约束条件"),s("：")]),i("p",null,"列级约束有六种：主键，外键，唯一，检查，默认，非空/空值"),i("p",null,[i("strong",null,"表级约束条件"),s("：")]),i("p",null,"表级约束有四种，主键，外键，唯一，检查"),i("ol",{start:"3"},[i("li",null,"创建表")]),i("p",null,"注意：要切换到你创建的数据库目录下"),i("div",{class:"language-SQL vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"SQL"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code","v-pre":""},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," TABLE"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," student"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"sid"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," int"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," primary key"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"                    name"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," varchar"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"10"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"null"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},",")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"                    sex enum("),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"`男`"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},","),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}},"`女`"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"not null"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," default"),i("span",{style:{"--shiki-light":"#032F62","--shiki-dark":"#9ECBFF"}}," `男`"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},");")])])])]),i("div",{class:"language-SQL vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"SQL"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code","v-pre":""},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"[CONSTRANINT <外键名>] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FOREIGN KEY"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 字段名 [,字段名2,...] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"REFERENCES"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," <"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"主表名"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},">"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 主键列1 [,主键列2,...];")])])])]),i("ol",{start:"4"},[i("li",null,"修改表")]),i("div",{class:"language-SQL vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"SQL"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code","v-pre":""},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"ALTER"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," TABLE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 表名[ADD 新列名 数据类型[列级约束条件]]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			   [DROP COLUMN 列名[restrict|cascade]]")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"			   [ALTER COLUMN 列名 新数据类型];")])])])]),i("ol",{start:"5"},[i("li",null,"删除表")]),i("div",{class:"language-SQL vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"SQL"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code","v-pre":""},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"DROP"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," TABLE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 表名[restrict|cascade];")])])])]),i("h3",{id:"数据库操纵语言-dml",tabindex:"-1"},[s("数据库操纵语言(DML) "),i("a",{class:"header-anchor",href:"#数据库操纵语言-dml","aria-label":'Permalink to "数据库操纵语言(DML)"'},"​")]),i("ol",null,[i("li",null,"插入数据")]),i("p",null,"通过使用insert into语句来向数据库中插入一条数据："),i("div",{class:"language-SQL vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"SQL"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code","v-pre":""},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INSERT INTO"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 表名 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"VALUES"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(值1，值2，值3);")])])])]),i("p",null,"如果插入的数据与列一一对应，那么可以省略列名，但是如果希望向指定列上插入数据，就需要给出列名："),i("div",{class:"language-SQL vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"SQL"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code","v-pre":""},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INSERT INTO"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 表名(列名1，列名2) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"VALUES"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(值1，值2);")])])])]),i("p",null,"我们可以一次性向数据库中插入多条数据："),i("div",{class:"language-SQL vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"SQL"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code","v-pre":""},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INSERT INTO"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 表名(列名1，列名2) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"VALUES"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"（值1，值2），（值1，值2），（值1，值2）;")])])])]),i("ol",{start:"2"},[i("li",null,"修改数据")]),i("p",null,"通过update语句来更新表中的数据："),i("div",{class:"language-SQL vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"SQL"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code","v-pre":""},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"UPDATE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 表名 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SET"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 列名"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"="),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"值, ... "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"WHERE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 条件;")])])])]),i("p",null,"SQL语句的判等是“=”"),i("ol",{start:"3"},[i("li",null,"删除数据")]),i("p",null,"通过delete来删除表中的数据："),i("div",{class:"language-SQL vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"SQL"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code","v-pre":""},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"DELETE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 表名;")])])])]),i("p",null,"通过这种方式，将删除表中全部数据，也可以使用where来添加条件，只删除指定的数据"),i("div",{class:"language-SQL vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"SQL"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code","v-pre":""},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"DELETE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 表名 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"WHERE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 条件;")])])])]),i("h2",{id:"数据库查询语句-dql",tabindex:"-1"},[s("数据库查询语句(DQL) "),i("a",{class:"header-anchor",href:"#数据库查询语句-dql","aria-label":'Permalink to "数据库查询语句(DQL)"'},"​")]),i("p",null,[i("strong",null,"单表查询")]),i("div",{class:"language-SQL vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"SQL"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code","v-pre":""},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 指定查询某一列数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 列名[,列名] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 表名;")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 会以别名显示此列")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 列名 别名 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 表名")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 查询所有的列数据")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 表名")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 只查询不重复的值")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT DISTINCT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 列名 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 表名")])])])]),i("p",null,"也可以添加where字句来限定查询目标："),i("div",{class:"language-SQL vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"SQL"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code","v-pre":""},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 表名 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"WHERE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 条件;")])])])]),i("p",null,[i("strong",null,"常用查询条件")]),i("ul",null,[i("li",null,"一般的比较运算符，包括=, >, <, >=, <= , !=等"),i("li",null,"是否在集合中：in、 not in"),i("li",null,"字符模糊匹配：like、not like"),i("li",null,"多重条件连接查询：and、or、not")]),i("p",null,[i("strong",null,"排序查询")]),i("p",null,"通过order by来将查询结果进行排序："),i("div",{class:"language-SQL vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"SQL"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code","v-pre":""},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 表名 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"WHERE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 条件 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"ORDER BY"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 列名 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"ASC"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"|"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"DESC"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])])]),i("p",null,"使用ASC表示升序排序，使用DESC表示降序排序，默认为升序"),i("p",null,"也可以同时添加多个排序"),i("div",{class:"language-SQL vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"SQL"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code","v-pre":""},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 表名 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"WHERE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 条件 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"ORDER BY"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 列名1 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"ASC"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"|"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"DESC"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},", 列名2 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"ASC"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"|"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"DESC"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])])]),i("p",null,[i("strong",null,"聚集函数")]),i("p",null,"聚集函数一般用作统计，包括："),i("ul",null,[i("li",null,[i("p",null,"count([distinct*]) 统计所有的行数(distinct表示去重再统计)")]),i("li",null,[i("p",null,"count([distinct]列名) 统计某列的值总和")]),i("li",null,[i("p",null,"sum([distinct]列名) 求一列的和（注意必须是数字类型的）")]),i("li",null,[i("p",null,"avg([distinct]列名) 求一列的平均值（注意必须是数据类型的）")]),i("li",null,[i("p",null,"max([distinct]列名) 求一列的最大值")]),i("li",null,[i("p",null,"min([distinct]列名) 求一列的最小值")])]),i("p",null,"一般聚集函数是这样使用的："),i("div",{class:"language-SQL vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"SQL"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code","v-pre":""},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," count"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"distinct"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 列名) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 表名 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"WHERE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 条件;")])])])]),i("p",null,[i("strong",null,"分组和分页查询")]),i("p",null,"通过使用group by来对查询结果进行分组，需要结合聚合函数一起使用："),i("div",{class:"language-SQL vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"SQL"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code","v-pre":""},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," sum"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 表名 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"WHERE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 条件 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"GROUP BY"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 列名;")])])])]),i("p",null,"还可以添加having来限制分组条件："),i("div",{class:"language-SQL vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"SQL"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code","v-pre":""},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," sum"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"("),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"*"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},") "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 表名 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"WHERE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 条件 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"GROUP BY"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 列名 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"HAVING"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 约束条件;")])])])]),i("p",null,"通过limit来限制查询的数量，只取n个结果"),i("div",{class:"language-SQL vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"SQL"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code","v-pre":""},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 表名 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"LIMIT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 数量;")])])])]),i("p",null,"也可以进行分页"),i("div",{class:"language-SQL vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"SQL"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code","v-pre":""},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 表名 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"LIMIT"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 起始位置，数量;")])])])]),i("p",null,[i("strong",null,"多表查询")]),i("p",null,"同时查询两个或两个以上的表，多表查询会通过连接转换的方式转换为单表查询"),i("div",{class:"language-SQL vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"SQL"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code","v-pre":""},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 表1，表2;")])])])]),i("p",null,"直接这样查询会得到两张表的笛卡尔积，也就是每一项数据和另一张表的每一项数据都结合一次，会产生庞大的数据"),i("div",{class:"language-SQL vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"SQL"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code","v-pre":""},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 表1，表2 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"WHERE"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 条件;")])])])]),i("p",null,[i("strong",null,"注意"),s("：如果两个表都带有此属性，需要添加表名前缀来指明是哪一个表的数据")]),i("p",null,[i("strong",null,"自身连接查询")]),i("p",null,"自身连接，就是将表本身和笛卡尔积计算，得到结果，但是由于表名相同，因此要先起一个别名："),i("div",{class:"language-SQL vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"SQL"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code","v-pre":""},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"SELECT"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," *"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 表名 别名1，表名 别名2;")])])])]),i("p",null,[i("strong",null,"外连接查询")]),i("p",null,"外连接查询专门用于联合查询情景，比如现在有一个存储用户的表，和用户的详细的信息，如果想要得到一张完整的表，就需要用到外连接，有三种方式："),i("ul",null,[i("li",null,"通过inner join进行内连接，只会返回两个满足条件的交集部分"),i("li",null,"通过left join进行左连接，不仅会返回两个满足条件的交集部分，也会返回左边表中的全部数据，而右边表中确实数据会使用null来代替（右连接right join同理）")]),i("h3",{id:"数据库控制语言-dcl",tabindex:"-1"},[s("数据库控制语言(DCL) "),i("a",{class:"header-anchor",href:"#数据库控制语言-dcl","aria-label":'Permalink to "数据库控制语言(DCL)"'},"​")]),i("p",null,[i("strong",null,"创建用户")]),i("p",null,"通过create user来创建用户"),i("div",{class:"language-SQL vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"SQL"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code","v-pre":""},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," USER"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," 用户名"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," indentified "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"by"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 密码;")])])])]),i("p",null,"也可以不带密码"),i("div",{class:"language-SQL vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"SQL"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code","v-pre":""},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," USER"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," 用户名"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";")])])])]),i("p",null,"可以通过@来限制用户登录的登录IP地址，%表示匹配所有的IP地址，默认使用的就是任意IP地址"),i("p",null,[i("strong",null,"登录用户")]),i("p",null,"首先需要添加一个环境变量，然后通过cmd去登录mysql："),i("div",{class:"language-SQL vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"SQL"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code","v-pre":""},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"login"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," -"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"u 用户名 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"-"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"p;")])])])]),i("p",null,"输入密码后即可登录此用户，然后输入以下命令来看看是否能访问所有数据库："),i("div",{class:"language-SQL vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"SQL"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code","v-pre":""},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"show databases;")])])])]),i("p",null,"我们发现，虽然用户能够登录，但并不能查看完整的数据库列表，这是因为用户还没有权限"),i("p",null,[i("img",{src:t,alt:"6.png"})]),i("p",null,[i("strong",null,"用户权限")]),i("p",null,"通过使用grant来为一个数据库用户进行授权："),i("div",{class:"language-SQL vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"SQL"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code","v-pre":""},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"grant"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," all|权限1，权限2...(列1,...) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"on"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," 数据库"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"表"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," to"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 用户 [with grant option];")])])])]),i("p",null,"其中all代表授予所有权限，当数据库和表为*，代表为所有的数据库和表都授权。如果再最后添加了with great option,那么被授权的用户还能将已获得的授权继续授权给其他用户。 可以使用revoke来收回一个权限："),i("div",{class:"language-SQL vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"SQL"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code","v-pre":""},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"revoke"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," all|权限1，权限2...(列1，...) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"on"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 数据库，表 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"from"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 用户;")])])])]),i("h2",{id:"视图",tabindex:"-1"},[s("视图 "),i("a",{class:"header-anchor",href:"#视图","aria-label":'Permalink to "视图"'},"​")]),i("p",null,"视图的本质是一个查询的结果。"),i("p",null,"通过create view来创建视图："),i("div",{class:"language-SQL vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"SQL"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code","v-pre":""},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," VIEW"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," 视图名称"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"(列名) "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"as"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 子查询语句 [WITH CHECK OPTION];")])])])]),i("p",null,"WITH CHECK OPTION是指当创建后，如果更新视图中的数据，是否要满足子查询中的条件表达式，不满足将无法插入，创建后，我们就可以使用select语句来直接查询视图上的数据了，因此，还能在视图的基础上，导出其他的视图。"),i("ol",null,[i("li",null,"若视图是由两个以上基本表导出的，则此视图不允许更新。"),i("li",null,"若视图的字段来自字段表达式或常数，则不允许对此视图执行INSERT和UPDATE操作，但允许执行DELETE操作。"),i("li",null,"若视图的字段来自集函数，则此视图不允许更新。"),i("li",null,"若视图定义中含有GROUP BY子句，则此视图不允许更新。"),i("li",null,"若视图定义中含有DISTINCT短语，则此视图不允许更新。"),i("li",null,"若视图定义中有嵌套查询，并且内层查询的FROM子句中涉及的表也是导出该视图的基本表，则此视图不允许更新。"),i("li",null,"一个不允许更新的视图上定义的视图也不允许更新")]),i("p",null,[s("通过"),i("code",null,"drop"),s("来删除一个视图：")]),i("div",{class:"language-sql vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code","v-pre":""},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"drop"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," view"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," apptest;")])])])]),i("h2",{id:"索引",tabindex:"-1"},[s("索引 "),i("a",{class:"header-anchor",href:"#索引","aria-label":'Permalink to "索引"'},"​")]),i("p",null,"在数据量非常庞大的时候，创建索引快速地定位元素存放的位置："),i("div",{class:"language-SQL vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"SQL"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code","v-pre":""},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 创建索引")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," INDEX"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," 索引名称"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ON"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 表名 (列名)")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 查看表中的索引")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"show "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"INDEX"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," student")])])])]),i("p",null,"通过下面的命令删除一个索引："),i("div",{class:"language-sql vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code","v-pre":""},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"drop"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," index"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 索引名称 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"on"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 表名")])])])]),i("p",null,"虽然添加索引后会使得查询效率更高，但是我们不能过度使用索引，索引为我们带来高速查询效率的同时，也会在数据更新时产生额外建立索引的开销，同时也会占用磁盘资源。"),i("h2",{id:"触发器",tabindex:"-1"},[s("触发器 "),i("a",{class:"header-anchor",href:"#触发器","aria-label":'Permalink to "触发器"'},"​")]),i("p",null,[s("在某种条件下会自动触发，在"),i("code",null,"select"),s("/"),i("code",null,"update"),s("/"),i("code",null,"delete"),s("时，会自动执行我们预先设定的内容，触发器通常用于检查内容的安全性，相比直接添加约束，触发器显得更加灵活。")]),i("p",null,[s("触发器所依附的表称为基本表，当触发器表上发生"),i("code",null,"select"),s("/"),i("code",null,"update"),s("/"),i("code",null,"delete"),s("等操作时，会自动生成两个临时的表（new表和old表，只能由触发器使用）")]),i("p",null,[s("比如在"),i("code",null,"insert"),s("操作时，新的内容会被插入到new表中；在"),i("code",null,"delete"),s("操作时，旧的内容会被移到old表中，我们仍可在old表中拿到被删除的数据；在"),i("code",null,"update"),s("操作时，旧的内容会被移到old表中，新的内容会出现在new表中。")]),i("div",{class:"language-sql vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code","v-pre":""},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"CREATE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," TRIGGER"),i("span",{style:{"--shiki-light":"#6F42C1","--shiki-dark":"#B392F0"}}," 触发器名称"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," [BEFORE|AFTER] [INSERT|UPDATE|DELETE] "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"ON"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 表名"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"/"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"视图名 "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"FOR"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," EACH "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"ROW"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," DELETE"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," FROM"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," student "),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"WHERE"),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," student"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"sno"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," ="),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}}," new"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"."),i("span",{style:{"--shiki-light":"#005CC5","--shiki-dark":"#79B8FF"}},"sno")])])])]),i("p",null,"FOR EACH ROW表示针对每一行都会生效，无论哪行进行指定操作都会执行触发器！"),i("p",null,"通过下面的命令来查看触发器："),i("div",{class:"language-sql vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code","v-pre":""},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"SHOW TRIGGERS")])])])]),i("p",null,"如果不需要，我们就可以删除此触发器："),i("div",{class:"language-sql vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code","v-pre":""},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"DROP"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," TRIGGER"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 触发器名称")])])])]),i("h2",{id:"事务",tabindex:"-1"},[s("事务 "),i("a",{class:"header-anchor",href:"#事务","aria-label":'Permalink to "事务"'},"​")]),i("p",null,"当我们要进行的操作非常多时，比如要依次删除很多个表的数据，我们就需要执行大量的SQL语句来完成，这些数据库操作语句就可以构成一个事务！只有Innodb引擎支持事务，我们可以这样来查看支持的引擎："),i("div",{class:"language-sql vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code","v-pre":""},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"SHOW ENGINES;")])])])]),i("p",null,"MySQL默认采用的是Innodb引擎，我们也可以去修改为其他的引擎。"),i("p",null,"事务具有以下特性："),i("ul",null,[i("li",null,[i("strong",null,"原子性"),s(":一个事务（transaction）中的所有操作，要么全部完成，要么全部不完成，不会结束在中间某个环节。事务在执行过程中发生错误，会被回滚（Rollback）到事务开始前的状态，就像这个事务从来没有执行过一样。")]),i("li",null,[i("strong",null,"一致性"),s(":在事务开始之前和事务结束以后，数据库的完整性没有被破坏。这表示写入的资料必须完全符合所有的预设规则，这包含资料的精确度、串联性以及后续数据库可以自发性地完成预定的工作。")]),i("li",null,[i("strong",null,"隔离性"),s(":数据库允许多个并发事务同时对其数据进行读写和修改的能力，隔离性可以防止多个事务并发执行时由于交叉执行而导致数据的不一致。事务隔离分为不同级别，包括读未提交（Read uncommitted）、读提交（read committed）、可重复读（repeatable read）和串行化（Serializable）。")]),i("li",null,[i("strong",null,"持久性"),s(":事务处理结束后，对数据的修改就是永久的，即便系统故障也不会丢失。")])]),i("p",null,"我们通过以下例子来探究以下事务："),i("div",{class:"language-sql vp-adaptive-theme"},[i("button",{title:"Copy Code",class:"copy"}),i("span",{class:"lang"},"sql"),i("pre",{class:"shiki shiki-themes github-light github-dark vp-code","v-pre":""},[i("code",null,[i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"begin"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";   #开始事务")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"...")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"rollback"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},";  #回滚事务")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"savepoint 回滚点;  #添加回滚点")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"rollback"),i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}}," to"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}}," 回滚点; #回滚到指定回滚点")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"...")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#D73A49","--shiki-dark":"#F97583"}},"commit"),i("span",{style:{"--shiki-light":"#24292E","--shiki-dark":"#E1E4E8"}},"; #提交事务")]),s(`
`),i("span",{class:"line"},[i("span",{style:{"--shiki-light":"#6A737D","--shiki-dark":"#6A737D"}},"-- 一旦提交，就无法再进行回滚了！")])])])])],-1),n=[k];function p(d,E,r,g,u,c){return h(),a("div",null,n)}const F=l(e,[["render",p]]);export{y as __pageData,F as default};
